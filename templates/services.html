{% extends "base.html" %}
{% block title %}Services{% endblock title %}
{% block body %}

<div class="container my-5">
  <h2 class="text-center mb-4">Our Services</h2>
  <div class="row row-cols-1 row-cols-md-3 g-4">

    {% for service in services %}
    <div class="col">
      <div class="card h-100 shadow-sm">
        {% if service.image %}
          <img src="{{ service.image.url }}" class="card-img-top" alt="{{ service.name|default:'Service Image' }}">
        {% else %}
          <img src="/static/img/default-service.png" class="card-img-top" alt="{{ service.name|default:'Service Image' }}">
        {% endif %}
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">{{ service.name|default:'Unnamed Service' }}</h5>
          <p class="card-text">{{ service.description|default:'No description available.' }}</p>
          <p class="card-text text-success fw-bold">â‚¹ {{ service.price|default:'N/A' }}</p>
          <div class="mt-auto d-flex justify-content-between align-items-center">
            <div>
              <!-- View button always visible -->
              <a href="{% url 'service_detail' service.pk %}" class="btn btn-outline-secondary btn-sm">
                View
              </a>
              
              <!-- Book button only for logged-in users -->
              {% if request.user.is_authenticated %}
              <a href="{% url 'book_service' %}?service={{ service.name }}" class="btn btn-primary btn-sm">
                Book Now
              </a>
              {% endif %}
            </div>
            {% if service.duration %}
            <small class="text-muted">{{ service.duration }}</small>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
    {% empty %}
      <p class="text-center">No services available.</p>
    {% endfor %}

  </div>
</div>

{% endblock body %}
